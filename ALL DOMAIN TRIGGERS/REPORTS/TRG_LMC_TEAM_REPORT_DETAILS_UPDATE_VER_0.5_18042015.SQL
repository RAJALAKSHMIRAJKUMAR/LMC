-- VERSION:0.5 --DATE:18/04/2015 --DESC:TRD_CONTRACT_NO CHANGED AS CLD_ID --DONE BY:RL
-- VERSION:0.4 --DATE:07/04/2015 --DESC:CHANGED TRIGGER AS PER TABLE DESIGN --DONE BY:RL
-- VERSION:0.3 --DATE:26/03/2015 --DESC:REMOVED TRD_LOCATION,TRD_CONTRACT_NO & ADDED CLD_ID, EMP_ID CHANGED AS ULD IN LMC_TEAM_REPORT_DETAILSTABLE --DONE BY:RL
-- VERSION:0.2 --SDATE:14/03/2015 --EDATE:14/03/2015 --DESC:REMOVED TRD_DOC_FILE_NAME TICKLER TRIGGER --DONE BY:RL


DROP TRIGGER IF EXISTS TRG_LMC_TEAM_REPORT_DETAILS_UPDATE;
CREATE TRIGGER TRG_LMC_TEAM_REPORT_DETAILS_UPDATE
AFTER UPDATE ON LMC_TEAM_REPORT_DETAILS
FOR EACH ROW

BEGIN 
	
	DECLARE OLD_VALUE TEXT DEFAULT '';
	DECLARE NEW_VALUE TEXT DEFAULT '';
	
	IF((OLD.ULD_ID!=NEW.ULD_ID) OR (OLD.TRD_DATE!=NEW.TRD_DATE) OR
	(OLD.TRD_LOCATION IS NULL AND NEW.TRD_LOCATION IS NOT NULL) OR
	(OLD.TRD_LOCATION IS NOT NULL AND NEW.TRD_LOCATION IS NULL) OR
	(OLD.TRD_LOCATION!=NEW.TRD_LOCATION) OR 
	(OLD.TRD_CONTRACT_NO IS NULL AND NEW.TRD_CONTRACT_NO IS NOT NULL) OR
	(OLD.TRD_CONTRACT_NO IS NOT NULL AND NEW.TRD_CONTRACT_NO IS NULL) OR
	(OLD.TRD_CONTRACT_NO!=NEW.TRD_CONTRACT_NO) OR
	(OLD.TC_ID!=NEW.TC_ID) OR
	(OLD.TRD_REACH_SITE IS NULL AND NEW.TRD_REACH_SITE IS NOT NULL) OR
	(OLD.TRD_REACH_SITE IS NOT NULL AND NEW.TRD_REACH_SITE IS NULL) OR
	(OLD.TRD_REACH_SITE!=NEW.TRD_REACH_SITE) OR
	(OLD.TRD_LEAVE_SITE IS NULL AND NEW.TRD_LEAVE_SITE IS NOT NULL) OR
	(OLD.TRD_LEAVE_SITE IS NOT NULL AND NEW.TRD_LEAVE_SITE IS NULL) OR
	(OLD.TRD_LEAVE_SITE!=NEW.TRD_LEAVE_SITE) OR
	(OLD.TOJ_ID IS NULL AND NEW.TOJ_ID IS NOT NULL) OR
	(OLD.TOJ_ID IS NOT NULL AND NEW.TOJ_ID IS NULL) OR
	(OLD.TOJ_ID!=NEW.TOJ_ID) OR 
	(OLD.TRD_WEATHER_REASON IS NULL AND NEW.TRD_WEATHER_REASON IS NOT NULL) OR
	(OLD.TRD_WEATHER_REASON IS NOT NULL AND NEW.TRD_WEATHER_REASON IS NULL) OR
	(OLD.TRD_WEATHER_REASON!=NEW.TRD_WEATHER_REASON) OR
	(OLD.TRD_WEATHER_FROM_TIME IS NULL AND NEW.TRD_WEATHER_FROM_TIME IS NOT NULL) OR
	(OLD.TRD_WEATHER_FROM_TIME IS NOT NULL AND NEW.TRD_WEATHER_FROM_TIME IS NULL) OR
	(OLD.TRD_WEATHER_FROM_TIME!=NEW.TRD_WEATHER_FROM_TIME) OR
	(OLD.TRD_WEATHER_TO_TIME IS NULL AND NEW.TRD_WEATHER_TO_TIME IS NOT NULL) OR
	(OLD.TRD_WEATHER_TO_TIME IS NOT NULL AND NEW.TRD_WEATHER_TO_TIME IS NULL) OR
	(OLD.TRD_WEATHER_TO_TIME!=NEW.TRD_WEATHER_TO_TIME) OR
	(OLD.TRD_PIPE_TESTING IS NULL AND NEW.TRD_PIPE_TESTING IS NOT NULL) OR
	(OLD.TRD_PIPE_TESTING IS NOT NULL AND NEW.TRD_PIPE_TESTING IS NULL) OR
	(OLD.TRD_PIPE_TESTING!=NEW.TRD_PIPE_TESTING) OR 
	(OLD.TRD_START_PRESSURE IS NULL AND NEW.TRD_START_PRESSURE IS NOT NULL) OR
	(OLD.TRD_START_PRESSURE IS NOT NULL AND NEW.TRD_START_PRESSURE IS NULL) OR
	(OLD.TRD_START_PRESSURE!=NEW.TRD_START_PRESSURE) OR
	(OLD.TRD_END_PRESSURE IS NULL AND NEW.TRD_END_PRESSURE IS NOT NULL) OR
	(OLD.TRD_END_PRESSURE IS NOT NULL AND NEW.TRD_END_PRESSURE IS NULL) OR
	(OLD.TRD_END_PRESSURE!=NEW.TRD_END_PRESSURE) OR
	(OLD.TRD_REMARK IS NULL AND NEW.TRD_REMARK IS NOT NULL) OR
	(OLD.TRD_REMARK IS NOT NULL AND NEW.TRD_REMARK IS NULL) OR
	(OLD.TRD_REMARK!=NEW.TRD_REMARK) OR
	(OLD.TRD_IMG_FILE_NAME IS NULL AND NEW.TRD_IMG_FILE_NAME IS NOT NULL) OR
	(OLD.TRD_IMG_FILE_NAME IS NOT NULL AND NEW.TRD_IMG_FILE_NAME IS NULL) OR
	(OLD.TRD_IMG_FILE_NAME!=NEW.TRD_IMG_FILE_NAME)) THEN
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_ID=', OLD.TRD_ID,','); 
	END IF;

	IF (OLD.ULD_ID!= NEW.ULD_ID) THEN  
		SET OLD_VALUE = CONCAT(OLD_VALUE,'ULD_ID=', OLD.ULD_ID,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'ULD_ID=', NEW.ULD_ID,','); 
	END IF;

	IF (OLD.TRD_DATE!= NEW.TRD_DATE) THEN  
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_DATE=', OLD.TRD_DATE,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_DATE=', NEW.TRD_DATE,','); 
	END IF;

	IF (OLD.TRD_LOCATION IS NULL AND NEW.TRD_LOCATION IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_LOCATION=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_LOCATION=',NEW.TRD_LOCATION,',');
	ELSEIF(OLD.TRD_LOCATION IS NOT NULL AND NEW.TRD_LOCATION IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_LOCATION=',OLD.TRD_LOCATION,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_LOCATION=','<NULL>,');
	ELSEIF (OLD.TRD_LOCATION!= NEW.TRD_LOCATION) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_LOCATION=', OLD.TRD_LOCATION,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_LOCATION=', NEW.TRD_LOCATION,','); 
	END IF;

	IF (OLD.TRD_CONTRACT_NO IS NULL AND NEW.TRD_CONTRACT_NO IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_CONTRACT_NO=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_CONTRACT_NO=',NEW.TRD_CONTRACT_NO,',');
	ELSEIF(OLD.TRD_CONTRACT_NO IS NOT NULL AND NEW.TRD_CONTRACT_NO IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_CONTRACT_NO=',OLD.TRD_CONTRACT_NO,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_CONTRACT_NO=','<NULL>,');
	ELSEIF (OLD.TRD_CONTRACT_NO!= NEW.TRD_CONTRACT_NO) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_CONTRACT_NO=', OLD.TRD_CONTRACT_NO,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_CONTRACT_NO=', NEW.TRD_CONTRACT_NO,','); 
	END IF;

	IF (OLD.TC_ID!= NEW.TC_ID) THEN  
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TC_ID=', OLD.TC_ID,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TC_ID=', NEW.TC_ID,','); 
	END IF;

	IF (OLD.TRD_REACH_SITE IS NULL AND NEW.TRD_REACH_SITE IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_REACH_SITE=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_REACH_SITE=',NEW.TRD_REACH_SITE,',');
	ELSEIF(OLD.TRD_REACH_SITE IS NOT NULL AND NEW.TRD_REACH_SITE IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_REACH_SITE=',OLD.TRD_REACH_SITE,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_REACH_SITE=','<NULL>,');
	ELSEIF (OLD.TRD_REACH_SITE!= NEW.TRD_REACH_SITE) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_REACH_SITE=', OLD.TRD_REACH_SITE,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_REACH_SITE=', NEW.TRD_REACH_SITE,','); 
	END IF;

	IF (OLD.TRD_LEAVE_SITE IS NULL AND NEW.TRD_LEAVE_SITE IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_LEAVE_SITE=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_LEAVE_SITE=',NEW.TRD_LEAVE_SITE,',');
	ELSEIF(OLD.TRD_LEAVE_SITE IS NOT NULL AND NEW.TRD_LEAVE_SITE IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_LEAVE_SITE=',OLD.TRD_LEAVE_SITE,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_LEAVE_SITE=','<NULL>,');
	ELSEIF (OLD.TRD_LEAVE_SITE!= NEW.TRD_LEAVE_SITE) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_LEAVE_SITE=', OLD.TRD_LEAVE_SITE,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_LEAVE_SITE=', NEW.TRD_LEAVE_SITE,','); 
	END IF;

	IF (OLD.TOJ_ID IS NULL AND NEW.TOJ_ID IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TOJ_ID=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TOJ_ID=',NEW.TOJ_ID,',');
	ELSEIF(OLD.TOJ_ID IS NOT NULL AND NEW.TOJ_ID IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TOJ_ID=',OLD.TOJ_ID,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TOJ_ID=','<NULL>,');
	ELSEIF (OLD.TOJ_ID!= NEW.TOJ_ID) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TOJ_ID=', OLD.TOJ_ID,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TOJ_ID=', NEW.TOJ_ID,','); 
	END IF;

	IF (OLD.TRD_WEATHER_REASON IS NULL AND NEW.TRD_WEATHER_REASON IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_WEATHER_REASON=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_WEATHER_REASON=',NEW.TRD_WEATHER_REASON,',');
	ELSEIF(OLD.TRD_WEATHER_REASON IS NOT NULL AND NEW.TRD_WEATHER_REASON IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_WEATHER_REASON=',OLD.TRD_WEATHER_REASON,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_WEATHER_REASON=','<NULL>,');
	ELSEIF (OLD.TRD_WEATHER_REASON!= NEW.TRD_WEATHER_REASON) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_WEATHER_REASON=', OLD.TRD_WEATHER_REASON,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_WEATHER_REASON=', NEW.TRD_WEATHER_REASON,','); 
	END IF;

	IF (OLD.TRD_WEATHER_FROM_TIME IS NULL AND NEW.TRD_WEATHER_FROM_TIME IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_WEATHER_FROM_TIME=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_WEATHER_FROM_TIME=',NEW.TRD_WEATHER_FROM_TIME,',');
	ELSEIF(OLD.TRD_WEATHER_FROM_TIME IS NOT NULL AND NEW.TRD_WEATHER_FROM_TIME IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_WEATHER_FROM_TIME=',OLD.TRD_WEATHER_FROM_TIME,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_WEATHER_FROM_TIME=','<NULL>,');
	ELSEIF (OLD.TRD_WEATHER_FROM_TIME!= NEW.TRD_WEATHER_FROM_TIME) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_WEATHER_FROM_TIME=', OLD.TRD_WEATHER_FROM_TIME,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_WEATHER_FROM_TIME=', NEW.TRD_WEATHER_FROM_TIME,','); 
	END IF;

	IF (OLD.TRD_WEATHER_TO_TIME IS NULL AND NEW.TRD_WEATHER_TO_TIME IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_WEATHER_TO_TIME=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_WEATHER_TO_TIME=',NEW.TRD_WEATHER_TO_TIME,',');
	ELSEIF(OLD.TRD_WEATHER_TO_TIME IS NOT NULL AND NEW.TRD_WEATHER_TO_TIME IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_WEATHER_TO_TIME=',OLD.TRD_WEATHER_TO_TIME,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_WEATHER_TO_TIME=','<NULL>,');
	ELSEIF (OLD.TRD_WEATHER_TO_TIME!= NEW.TRD_WEATHER_TO_TIME) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_WEATHER_TO_TIME=', OLD.TRD_WEATHER_TO_TIME,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_WEATHER_TO_TIME=', NEW.TRD_WEATHER_TO_TIME,','); 
	END IF;

	IF (OLD.TRD_PIPE_TESTING IS NULL AND NEW.TRD_PIPE_TESTING IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_PIPE_TESTING=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_PIPE_TESTING=',NEW.TRD_PIPE_TESTING,',');
	ELSEIF(OLD.TRD_PIPE_TESTING IS NOT NULL AND NEW.TRD_PIPE_TESTING IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_PIPE_TESTING=',OLD.TRD_PIPE_TESTING,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_PIPE_TESTING=','<NULL>,');
	ELSEIF (OLD.TRD_PIPE_TESTING!= NEW.TRD_PIPE_TESTING) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_PIPE_TESTING=', OLD.TRD_PIPE_TESTING,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_PIPE_TESTING=', NEW.TRD_PIPE_TESTING,','); 
	END IF;

	IF (OLD.TRD_START_PRESSURE IS NULL AND NEW.TRD_START_PRESSURE IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_START_PRESSURE=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_START_PRESSURE=',NEW.TRD_START_PRESSURE,',');
	ELSEIF(OLD.TRD_START_PRESSURE IS NOT NULL AND NEW.TRD_START_PRESSURE IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_START_PRESSURE=',OLD.TRD_START_PRESSURE,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_START_PRESSURE=','<NULL>,');
	ELSEIF (OLD.TRD_START_PRESSURE!= NEW.TRD_START_PRESSURE) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_START_PRESSURE=', OLD.TRD_START_PRESSURE,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_START_PRESSURE=', NEW.TRD_START_PRESSURE,','); 
	END IF;

	IF (OLD.TRD_END_PRESSURE IS NULL AND NEW.TRD_END_PRESSURE IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_END_PRESSURE=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_END_PRESSURE=',NEW.TRD_END_PRESSURE,',');
	ELSEIF(OLD.TRD_END_PRESSURE IS NOT NULL AND NEW.TRD_END_PRESSURE IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_END_PRESSURE=',OLD.TRD_END_PRESSURE,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_END_PRESSURE=','<NULL>,');
	ELSEIF (OLD.TRD_END_PRESSURE!= NEW.TRD_END_PRESSURE) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_END_PRESSURE=', OLD.TRD_END_PRESSURE,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_END_PRESSURE=', NEW.TRD_END_PRESSURE,','); 
	END IF;

	IF (OLD.TRD_REMARK IS NULL AND NEW.TRD_REMARK IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_REMARK=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_REMARK=',NEW.TRD_REMARK,',');
	ELSEIF(OLD.TRD_REMARK IS NOT NULL AND NEW.TRD_REMARK IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_REMARK=',OLD.TRD_REMARK,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_REMARK=','<NULL>,');
	ELSEIF (OLD.TRD_REMARK!= NEW.TRD_REMARK) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_REMARK=', OLD.TRD_REMARK,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_REMARK=', NEW.TRD_REMARK,','); 
	END IF;

	IF (OLD.TRD_IMG_FILE_NAME IS NULL AND NEW.TRD_IMG_FILE_NAME IS NOT NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_IMG_FILE_NAME=','<NULL>,');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_IMG_FILE_NAME=',NEW.TRD_IMG_FILE_NAME,',');
	ELSEIF(OLD.TRD_IMG_FILE_NAME IS NOT NULL AND NEW.TRD_IMG_FILE_NAME IS NULL) THEN
		SET OLD_VALUE=CONCAT(OLD_VALUE,'TRD_IMG_FILE_NAME=',OLD.TRD_IMG_FILE_NAME,',');
		SET NEW_VALUE=CONCAT(NEW_VALUE,'TRD_IMG_FILE_NAME=','<NULL>,');
	ELSEIF (OLD.TRD_IMG_FILE_NAME!= NEW.TRD_IMG_FILE_NAME) THEN 
		SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_IMG_FILE_NAME=', OLD.TRD_IMG_FILE_NAME,','); 
		SET NEW_VALUE = CONCAT(NEW_VALUE,'TRD_IMG_FILE_NAME=', NEW.TRD_IMG_FILE_NAME,','); 
	END IF;
	
	IF((OLD.ULD_ID!=NEW.ULD_ID) OR (OLD.TRD_DATE!=NEW.TRD_DATE) OR
	(OLD.TRD_LOCATION IS NULL AND NEW.TRD_LOCATION IS NOT NULL) OR
	(OLD.TRD_LOCATION IS NOT NULL AND NEW.TRD_LOCATION IS NULL) OR
	(OLD.TRD_LOCATION!=NEW.TRD_LOCATION) OR 
	(OLD.TRD_CONTRACT_NO IS NULL AND NEW.TRD_CONTRACT_NO IS NOT NULL) OR
	(OLD.TRD_CONTRACT_NO IS NOT NULL AND NEW.TRD_CONTRACT_NO IS NULL) OR
	(OLD.TRD_CONTRACT_NO!=NEW.TRD_CONTRACT_NO) OR
	(OLD.TC_ID!=NEW.TC_ID) OR
	(OLD.TRD_REACH_SITE IS NULL AND NEW.TRD_REACH_SITE IS NOT NULL) OR
	(OLD.TRD_REACH_SITE IS NOT NULL AND NEW.TRD_REACH_SITE IS NULL) OR
	(OLD.TRD_REACH_SITE!=NEW.TRD_REACH_SITE) OR
	(OLD.TRD_LEAVE_SITE IS NULL AND NEW.TRD_LEAVE_SITE IS NOT NULL) OR
	(OLD.TRD_LEAVE_SITE IS NOT NULL AND NEW.TRD_LEAVE_SITE IS NULL) OR
	(OLD.TRD_LEAVE_SITE!=NEW.TRD_LEAVE_SITE) OR
	(OLD.TOJ_ID IS NULL AND NEW.TOJ_ID IS NOT NULL) OR
	(OLD.TOJ_ID IS NOT NULL AND NEW.TOJ_ID IS NULL) OR
	(OLD.TOJ_ID!=NEW.TOJ_ID) OR 
	(OLD.TRD_WEATHER_REASON IS NULL AND NEW.TRD_WEATHER_REASON IS NOT NULL) OR
	(OLD.TRD_WEATHER_REASON IS NOT NULL AND NEW.TRD_WEATHER_REASON IS NULL) OR
	(OLD.TRD_WEATHER_REASON!=NEW.TRD_WEATHER_REASON) OR
	(OLD.TRD_WEATHER_FROM_TIME IS NULL AND NEW.TRD_WEATHER_FROM_TIME IS NOT NULL) OR
	(OLD.TRD_WEATHER_FROM_TIME IS NOT NULL AND NEW.TRD_WEATHER_FROM_TIME IS NULL) OR
	(OLD.TRD_WEATHER_FROM_TIME!=NEW.TRD_WEATHER_FROM_TIME) OR
	(OLD.TRD_WEATHER_TO_TIME IS NULL AND NEW.TRD_WEATHER_TO_TIME IS NOT NULL) OR
	(OLD.TRD_WEATHER_TO_TIME IS NOT NULL AND NEW.TRD_WEATHER_TO_TIME IS NULL) OR
	(OLD.TRD_WEATHER_TO_TIME!=NEW.TRD_WEATHER_TO_TIME) OR
	(OLD.TRD_PIPE_TESTING IS NULL AND NEW.TRD_PIPE_TESTING IS NOT NULL) OR
	(OLD.TRD_PIPE_TESTING IS NOT NULL AND NEW.TRD_PIPE_TESTING IS NULL) OR
	(OLD.TRD_PIPE_TESTING!=NEW.TRD_PIPE_TESTING) OR 
	(OLD.TRD_START_PRESSURE IS NULL AND NEW.TRD_START_PRESSURE IS NOT NULL) OR
	(OLD.TRD_START_PRESSURE IS NOT NULL AND NEW.TRD_START_PRESSURE IS NULL) OR
	(OLD.TRD_START_PRESSURE!=NEW.TRD_START_PRESSURE) OR
	(OLD.TRD_END_PRESSURE IS NULL AND NEW.TRD_END_PRESSURE IS NOT NULL) OR
	(OLD.TRD_END_PRESSURE IS NOT NULL AND NEW.TRD_END_PRESSURE IS NULL) OR
	(OLD.TRD_END_PRESSURE!=NEW.TRD_END_PRESSURE) OR
	(OLD.TRD_REMARK IS NULL AND NEW.TRD_REMARK IS NOT NULL) OR
	(OLD.TRD_REMARK IS NOT NULL AND NEW.TRD_REMARK IS NULL) OR
	(OLD.TRD_REMARK!=NEW.TRD_REMARK) OR
	(OLD.TRD_IMG_FILE_NAME IS NULL AND NEW.TRD_IMG_FILE_NAME IS NOT NULL) OR
	(OLD.TRD_IMG_FILE_NAME IS NOT NULL AND NEW.TRD_IMG_FILE_NAME IS NULL) OR
	(OLD.TRD_IMG_FILE_NAME!=NEW.TRD_IMG_FILE_NAME)) THEN

		IF (OLD.TRD_USERSTAMP_ID!= NEW.TRD_USERSTAMP_ID) THEN  
			SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_USERSTAMP_ID=', OLD.TRD_USERSTAMP_ID,','); 
		END IF;

		IF (OLD.TRD_TIMESTAMP!= NEW.TRD_TIMESTAMP) THEN 
			SET OLD_VALUE = CONCAT(OLD_VALUE,'TRD_TIMESTAMP=', OLD.TRD_TIMESTAMP,','); 
		END IF;

	END IF;

	IF (OLD_VALUE!='' AND NEW_VALUE!='') THEN	

		IF(OLD_VALUE!=NEW_VALUE)THEN	

			SET OLD_VALUE = SUBSTRING(OLD_VALUE,1,CHAR_LENGTH(OLD_VALUE)-1);
			SET NEW_VALUE = SUBSTRING(NEW_VALUE,1,CHAR_LENGTH(NEW_VALUE)-1);			
			INSERT INTO LMC_TICKLER_HISTORY(TP_ID,ULD_ID,TTIP_ID,TH_OLD_VALUE,TH_NEW_VALUE,TH_USERSTAMP_ID)VALUES
			((SELECT TP_ID FROM LMC_TICKLER_PROFILE WHERE TP_TYPE='UPDATION'),NEW.ULD_ID,
			(SELECT TTIP_ID FROM LMC_TICKLER_TABID_PROFILE WHERE TTIP_DATA='LMC_TEAM_REPORT_DETAILS'),OLD_VALUE,NEW_VALUE,
			(SELECT TRD_USERSTAMP_ID FROM LMC_TEAM_REPORT_DETAILS WHERE TRD_ID=NEW.TRD_ID));
		
		END IF;	

	END IF;
	
END;